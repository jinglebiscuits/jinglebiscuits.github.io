<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex" />
  <title>Tumnus's 3rd Birthday Party</title>
  
  <!-- Open Graph / Social Media Preview Tags -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="üéÇ Tumnus is turning 3! üéâ">
  <meta property="og:description" content="You're invited to celebrate!">
  <meta property="og:image" content="https://jinglebiscuits.github.io/images/tumnus-bday-background.jpg">
  <meta property="og:site_name" content="Tumnus's Birthday Party">
  
  <!-- Twitter Card Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="üéÇ Tumnus is turning 3! üéâ">
  <meta name="twitter:description" content="You're invited to celebrate!">
  <meta name="twitter:image" content="https://jinglebiscuits.github.io/images/tumnus-bday-background.jpg">
  
  <!-- Additional Meta Tags -->
  <meta name="description" content="Join us to celebrate Tumnus turning 3! Birthday party invitation with RSVP and calendar links.">
  
  <!-- Custom Birthday Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéÇ</text></svg>">
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!--  üéÇ  Tumnus's 3rd Birthday Invitation  üéÇ  -->
  <style>
  /* --- Full-page background layout with left-positioned content --- */
  :root {
    --accent: #ff7b00;
    --text: #333333;
    --bg: #fffdf7;
    --card: rgba(255, 255, 255, 0.95);
    --overlay: rgba(255, 253, 247, 0.85);
  }

  * {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    font-family: "Fredoka", sans-serif;
    color: var(--text);
    min-height: 100vh;
    
    /* Full page background image - replace with your image URL */
    background-image: url('/images/tumnus-bday-background.jpg');
    background-size: cover;
    background-position: center right;
    background-attachment: fixed;
    background-repeat: no-repeat;
  }

  .content-container {
    min-height: 100vh;
    display: flex;
    align-items: center;
    padding: 2rem 1rem;
    
    /* Semi-transparent overlay for text readability */
    background: linear-gradient(to right, var(--overlay) 0%, var(--overlay) 70%, transparent 100%);
  }

  .content {
    width: 100%;
    max-width: 500px;
  }

  h1 {
    font-size: 2.5rem;
    margin: 0 0 0.5rem 0;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  h2 {
    font-size: 1.3rem;
    font-weight: 400;
    margin: 0 0 2rem 0;
    opacity: 0.8;
  }

  .details {
    margin: 2rem 0 3rem 0;
  }

  .detail-item {
    display: flex;
    gap: 0.8rem;
    margin: 1.2rem 0;
    align-items: flex-start;
  }

  .detail-item svg {
    flex-shrink: 0;
    margin-top: 2px;
  }

  .button-group {
    display: flex;
    gap: 1rem;
    margin-top: 2.5rem;
    flex-wrap: wrap;
  }

  a.btn {
    display: inline-block;
    padding: 1.1rem 2rem;
    background: var(--accent);
    color: white;
    border-radius: 12px;
    text-decoration: none;
    font-weight: 700;
    font-size: 1rem;
    transition: all 0.3s ease;
    box-shadow: 0 6px 20px rgba(255, 123, 0, 0.4);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    flex: 1;
    text-align: center;
    min-width: 200px;
  }

  a.btn:hover {
    background: #e06e00;
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(255, 123, 0, 0.5);
  }

  a.btn.calendar {
    background: #4e8cff;
    box-shadow: 0 6px 20px rgba(78, 140, 255, 0.4);
  }

  a.btn.calendar:hover {
    background: #3d7ce6;
    box-shadow: 0 10px 30px rgba(78, 140, 255, 0.5);
  }

  footer {
    font-size: 0.85rem;
    margin-top: 2rem;
    opacity: 0.7;
  }

  .time-nowrap {
    white-space: nowrap;
  }

  /* Desktop: Position content on left 2/3 of screen */
  @media (min-width: 768px) {
    .content-container {
      padding: 2rem 4rem;
      background: linear-gradient(to right, var(--overlay) 0%, var(--overlay) 65%, transparent 100%);
    }
    
    .content {
      max-width: 600px;
      width: 66.67%; /* 2/3 of the screen */
    }
    
    h1 {
      font-size: 3rem;
    }
    
    h2 {
      font-size: 1.4rem;
    }
  }

  /* Large desktop: Even more spacing */
  @media (min-width: 1200px) {
    .content-container {
      padding: 3rem 6rem;
    }
    
    .content {
      max-width: 650px;
    }
  }

  /* Mobile adjustments */
  @media (max-width: 767px) {
    body {
      background-attachment: scroll; /* Better performance on mobile */
      background-position: center right; /* Show the right portion of the image */
      background-size: cover; /* Ensure full coverage */
    }
    
    .content-container {
      /* Simple transparency overlay for mobile */
      background: var(--overlay);
      padding: 1.5rem 1rem;
    }
    
    h1 {
      font-size: 2.8rem; /* Increased from 2.2rem */
    }
    
    h2 {
      font-size: 1.5rem; /* Increased from 1.3rem base */
    }
    
    .details {
      margin: 1.5rem 0 2rem 0;
      font-size: 1.1rem; /* Added larger text for details */
    }
    
    .detail-item {
      margin: 1.2rem 0; /* Slightly increased spacing */
    }
    
    .button-group {
      flex-direction: row; /* Changed to row for side-by-side layout */
      gap: 0.8rem; /* Reduced gap for more compact layout */
      margin-top: 2rem;
    }
    
    a.btn {
      min-width: unset;
      flex: 1; /* Buttons share available width equally */
      font-size: 1rem; /* Reduced from 1.1rem */
      padding: 0.8rem 1.2rem; /* More compact padding */
    }
    
    footer {
      font-size: 1rem; /* Increased from 0.85rem */
    }
  }
  </style>
</head>
<body>

<div class="content-container">
  <div class="content">
    <!-- Content will be populated by JavaScript based on URL parameter -->
    <div id="invitation-content" style="display: none;">
      <h1>Tumnus is turning&nbsp;3!</h1>
      
      <!-- Family Version -->
      <div id="family-version">
        <h2>Saturday ‚Ä¢ 20&nbsp;September ‚Ä¢ <span class="time-nowrap">9 ‚Äì 11 AM</span></h2>
        <div class="details">
          <div class="detail-item">
            <div>
              <strong>Our house</strong><br />
              4232&nbsp;Overlook&nbsp;Dr<br>
              Birmingham, AL&nbsp;35222
            </div>
          </div>
          <div class="detail-item">
            <span>üéÅ No&nbsp;gifts please!</span>
          </div>
          <div class="detail-item">
            <span>üç∞ We'll have coffee, brunch bites, and&nbsp;cake!</span>
          </div>
        </div>
        <div class="button-group">
          <a class="btn" id="family-rsvp"
            href="https://docs.google.com/forms/d/e/1FAIpQLSd5BeR93tjbGYHeBPGtbVmqPSx-5EmszHgR6y4slgH03Y4ODA/viewform?usp=dialog"
            target="_blank">
            üìù RSVP
          </a>
          <a id="family-calendar" class="btn calendar" href="#">üìÖ Calendar</a>
        </div>
        <footer>
          Questions? Text Kim & Scott
        </footer>
      </div>

      <!-- Friends Version -->
      <div id="friends-version">
        <h2>Sunday ‚Ä¢ 21&nbsp;September ‚Ä¢ <span class="time-nowrap">9 ‚Äì 11 AM</span></h2>
        <div class="details">
          <div class="detail-item">
            <div>
              <strong>Triangle Park</strong><br />
              4341&nbsp;Clairmont&nbsp;Ave<br>
              Birmingham, AL&nbsp;35222
            </div>
          </div>
          <div class="detail-item">
            <span>üéÅ No&nbsp;gifts please!</span>
          </div>
          <div class="detail-item">
            <span>üßÅ We'll have coffee, brunch bites, and&nbsp;cupcakes!</span>
          </div>
        </div>
        <div class="button-group">
          <a class="btn" id="friends-rsvp"
            href="https://docs.google.com/forms/d/e/1FAIpQLSeBDlunvYVMElj88h2OVptQs7voZ0EvliBm3r4edP13l2LgZg/viewform?usp=header"
            target="_blank">
            üìù RSVP
          </a>
          <a id="friends-calendar" class="btn calendar" href="#">üìÖ Calendar</a>
        </div>
        <footer>
          Questions? Text Kim & Scott
        </footer>
      </div>
    </div>

    <!-- Error Message -->
    <div id="error-content" style="display: none;">
      <h1>üéâ Private Event</h1>
      <h2>This invitation requires a valid access link.</h2>
      <div class="details">
        <div class="detail-item">
          <span>Please check your invitation for the correct link, or contact the host if you need assistance.</span>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Configuration for different invitation versions
  const inviteConfigs = {
    home: {
      // Family version
      date: '20250920', // September 20, 2025
      googleURL: 'https://calendar.google.com/calendar/render?action=TEMPLATE&text=Tumnus%27s+3rd+Birthday+Party&dates=20250920T090000/20250920T110000&details=Join+us+to+celebrate+Tumnus+turning+3%21+No+gifts+please&location=4232+Overlook+Drive+South+35222&ctz=America/Chicago',
      icsContent: `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//jinglebiscuits//tumnus-bday//EN
CALSCALE:GREGORIAN
METHOD:PUBLISH
BEGIN:VEVENT
UID:tumnus-bday-20250920@jinglebiscuits
DTSTAMP:20250923T120000Z
DTSTART:20250920T090000
DTEND:20250920T110000
SUMMARY:Tumnus's 3rd Birthday Party
DESCRIPTION:Join us to celebrate Tumnus turning 3! No gifts please!
LOCATION:4232 Overlook Drive South 35222
END:VEVENT
END:VCALENDAR`
    },
    park: {
      // Friends version
      date: '20250921', // September 21, 2025
      googleURL: 'https://calendar.google.com/calendar/render?action=TEMPLATE&text=Tumnus%27s+3rd+Birthday+Party&dates=20250921T090000/20250921T110000&details=Join+us+to+celebrate+Tumnus+turning+3%21+No+gifts+please&location=Triangle+Park+4341+Clairmont+Ave+Birmingham+AL+35222&ctz=America/Chicago',
      icsContent: `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//jinglebiscuits//tumnus-bday//EN
CALSCALE:GREGORIAN
METHOD:PUBLISH
BEGIN:VEVENT
UID:tumnus-bday-20250921@jinglebiscuits
DTSTAMP:20250923T120000Z
DTSTART:20250921T090000
DTEND:20250921T110000
SUMMARY:Tumnus's 3rd Birthday Party
DESCRIPTION:Join us to celebrate Tumnus turning 3! No gifts please!
LOCATION:Triangle Park 4341 Clairmont Ave Birmingham AL 35222
END:VEVENT
END:VCALENDAR`
    }
  };

  const isiOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;

  function getURLParameter(name) {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(name);
  }

  function setupCalendarButton(buttonId, config) {
    const btn = document.getElementById(buttonId);
    if (!btn) return;

    if (isiOS) {
      // Create data URL for iOS - bypasses server MIME type issues
      const blob = new Blob([config.icsContent], { type: 'text/calendar' });
      const dataURL = URL.createObjectURL(blob);
      btn.href = dataURL;
      btn.download = 'tumnus-bday.ics';
      btn.target = '_blank';
      btn.rel = 'noopener';
    } else {
      btn.href = config.googleURL;
      btn.target = '_blank';
      btn.rel = 'noopener';
    }
  }

  function showInvitation(inviteType) {
    // Hide error content
    document.getElementById('error-content').style.display = 'none';
    
    // Show invitation content
    document.getElementById('invitation-content').style.display = 'block';
    
    // Hide both versions initially
    document.getElementById('family-version').style.display = 'none';
    document.getElementById('friends-version').style.display = 'none';
    
    if (inviteType === 'home') {
      // Show family version
      document.getElementById('family-version').style.display = 'block';
      setupCalendarButton('family-calendar', inviteConfigs.home);
    } else if (inviteType === 'park') {
      // Show friends version
      document.getElementById('friends-version').style.display = 'block';
      setupCalendarButton('friends-calendar', inviteConfigs.park);
    }
  }

  function showError() {
    document.getElementById('invitation-content').style.display = 'none';
    document.getElementById('error-content').style.display = 'block';
  }

  window.addEventListener('DOMContentLoaded', function () {
    const inviteParam = getURLParameter('invite');
    
    if (inviteParam && inviteConfigs[inviteParam]) {
      showInvitation(inviteParam);
    } else {
      showError();
    }
  });
</script>

</body>
</html>